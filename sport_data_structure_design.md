# Sport插件数据结构设计文档

## 📋 **设计概述**

本文档详细说明Sport插件的三层数据结构设计，用于处理体育比赛项目的分类管理、基础项目定义和具体比赛项目创建。

## 🏗️ **三层数据架构**

### 第一层：项目大类（sport_category）
**作用**：存储运动项目的分类体系
```sql
sport_category (项目大类表)
├── 田径类 (id=1)
├── 球类 (id=2) 
├── 水上运动 (id=3)
├── 趣味比赛 (id=11)
└── ...
```

**特点**：
- 支持多级分类（parent_id, level, path）
- 包含大类和子类（如：水上运动 → 游泳）
- 用于前端项目选择时的分类展示

### 第二层：基础项目（sport_base_item）
**作用**：存储标准化的运动项目模板
```sql
sport_base_item (基础项目表)
├── 100米自由泳 (category_id=3, competition_type=1, gender_type=3)
├── 4×100米自由泳接力 (category_id=3, competition_type=2, gender_type=3)  
├── 100米跑 (category_id=1, competition_type=1, gender_type=3)
└── ...
```

**关键字段说明**：
- `category_id`: 关联项目大类
- `competition_type`: 比赛类型（1个人 2团体 3混合）
- `gender_type`: 性别类型（1男子 2女子 3混合）
- `age_group`: 年龄组别（可为空，表示不限）
- `rules`, `equipment`, `venue_requirements`: 标准规则和要求

### 第三层：具体比赛项目（sport_item）
**作用**：基于基础项目创建具体赛事的比赛项目
```sql
sport_item (比赛项目表)
├── 男子青少年组100米自由泳 (event_id=1, base_item_id=2, gender_type=1, age_group='青少年组')
├── 女子青少年组100米自由泳 (event_id=1, base_item_id=2, gender_type=2, age_group='青少年组')
├── 男子成年组100米自由泳 (event_id=1, base_item_id=2, gender_type=1, age_group='成年组')
└── ...
```

**关键字段说明**：
- `event_id`: 关联具体赛事
- `base_item_id`: 关联基础项目
- `gender_type`: 具体性别要求
- `age_group`: 具体年龄组别
- `max_participants`, `min_participants`: 参赛人数限制
- `registration_fee`: 报名费用

## 🎯 **性别和年龄组处理方案**

### 性别处理（gender_type字段）
```sql
1 = 男子项目    -- 仅限男性参加
2 = 女子项目    -- 仅限女性参加  
3 = 混合项目    -- 男女不限或混合参赛
```

### 年龄组处理（age_group字段）
```sql
-- 基础项目层级（sport_base_item）
'不限'           -- 不限制年龄，在创建具体项目时可细分
'青少年组'       -- 明确只适合青少年
'成年组'         -- 明确只适合成年人

-- 具体项目层级（sport_item）  
'青少年组(12-18岁)'   -- 具体年龄范围
'成年组(18-40岁)'     -- 具体年龄范围
'老年组(40岁以上)'    -- 具体年龄范围
'不限'               -- 不限制年龄
```

## 📊 **数据流程示例**

### 游泳项目完整流程

1. **项目大类创建**：
```sql
-- 已在sport_category_data.sql中定义
水上运动 (id=3) → 游泳 (id=27, parent_id=3)
```

2. **基础项目创建**：
```sql
-- sport_base_item_data.sql
100米自由泳 (id=2, category_id=3, competition_type=1, gender_type=3, age_group='不限')  
4×100米自由泳接力 (id=19, category_id=3, competition_type=2, gender_type=3, age_group='不限')
```

3. **具体项目创建**：
```sql
-- 根据赛事需求动态创建
男子青少年组100米自由泳 (event_id=1, base_item_id=2, gender_type=1, age_group='青少年组(12-18岁)')
女子青少年组100米自由泳 (event_id=1, base_item_id=2, gender_type=2, age_group='青少年组(12-18岁)')  
男子成年组100米自由泳 (event_id=1, base_item_id=2, gender_type=1, age_group='成年组(18-40岁)')
女子成年组100米自由泳 (event_id=1, base_item_id=2, gender_type=2, age_group='成年组(18-40岁)')
```

## 🔧 **实际应用场景**

### 场景1：创建赛事时选择项目
1. 用户在前端选择项目大类：**水上运动**
2. 系统展示该大类下的基础项目：**100米自由泳、200米自由泳、4×100米接力**等
3. 用户选择基础项目后，系统提供性别和年龄组选项
4. 最终创建具体的比赛项目：**男子成年组100米自由泳**

### 场景2：运动员报名参赛
1. 系统根据运动员性别和年龄，筛选可参加的比赛项目
2. 例如：18岁男性运动员只能看到**男子青少年组**或**男子成年组**或**混合项目**

### 场景3：成绩统计和记录
1. 基于具体比赛项目记录成绩
2. 可按基础项目统计历史最佳成绩
3. 支持不同性别和年龄组的成绩对比

## 💡 **设计优势**

### 🎯 **灵活性**
- 基础项目可重复使用于不同赛事
- 支持同一项目的多种组别设置
- 便于后期扩展新的项目类型

### 🔄 **可维护性**  
- 三层分离，职责清晰
- 修改基础项目规则，自动影响所有相关比赛项目
- 便于批量管理和配置

### 📈 **可扩展性**
- 支持新增项目大类和基础项目
- 支持复杂的年龄组和性别组合
- 支持个人赛、团体赛、混合赛等多种类型

### 🎨 **用户体验**
- 前端可提供层级化的项目选择界面
- 智能推荐适合的比赛项目
- 支持快速创建常见项目组合

## 📝 **开发建议**

### 🔥 **基础数据初始化**
1. 先执行 `sport_category_data.sql` 创建项目分类
2. 再执行 `sport_base_item_data.sql` 创建基础项目
3. 具体项目在创建赛事时动态生成

### ⚡ **前端界面设计**
1. 项目选择采用三级联动：**大类 → 基础项目 → 性别/年龄组**
2. 提供项目模板功能，一键创建常见组合
3. 支持批量创建多个性别/年龄组的相同项目

### 🛡️ **数据完整性**
1. 外键约束确保数据关联正确
2. 状态字段控制项目的可用性
3. 软删除保护历史数据完整性

## 🚀 **后续扩展方向**

1. **国际化支持**：基础项目名称和规则的多语言版本
2. **智能推荐**：根据赛事类型智能推荐适合的项目组合  
3. **模板系统**：预设常见比赛的项目模板
4. **统计分析**：基于历史数据的项目热度和参与度分析
5. **移动端优化**：针对小屏幕的项目选择界面优化

---

**总结**：通过三层数据结构设计，Sport插件能够灵活处理各种体育项目的分类、标准化和个性化需求，为用户提供便捷的赛事管理体验。 